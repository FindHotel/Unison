(function(e,t){"use strict";if(typeof define==="function"&&define.amd){define([],function(){return e.Unison=t()})}else{e.Unison=t()}})(this,function(){"use strict";var e=window;var t=document;var n=t.head;var r={};var i=false;var s;var o={parseMQ:function(t){var n=e.getComputedStyle(t,null).getPropertyValue("font-family");return n.replace(/"/g,"").replace(/'/g,"")},debounce:function(e,t,n){var r;return function(){var i=this,s=arguments;clearTimeout(r);r=setTimeout(function(){r=null;if(!n){e.apply(i,s)}},t);if(n&&!r){e.apply(i,s)}}},isObject:function(e){return typeof e==="object"},isUndefined:function(e){return typeof e==="undefined"},isUnisonReady:function(){return e.getComputedStyle(n,null).getPropertyValue("clear")!=="none"},initializeUnison:function(){i=o.isUnisonReady();a.update()}};var u={on:function(e,t){if(!o.isObject(r[e])){r[e]=[]}r[e].push(t)},off:function(e,t){if(!e)return r=[];if(o.isObject(r[e])){if(!t)return delete r[e];for(var n=0;n<r[e].length;n++){if(t===r[e][n]){r[e].splice(n,1);if(!r[e].length)delete r[e];return}}}},emit:function(e,t){if(o.isObject(r[e])){var n=r[e].slice();for(var i=0;i<n.length;i++){n[i].call(this,t)}}}};var a={all:function(){var e={};var n=o.parseMQ(t.querySelector("title")).split(",");for(var r=0;r<n.length;r++){var s=n[r].trim().split(" ");e[s[0]]=s[1]}return i?e:null},now:function(e){var t=o.parseMQ(n).split(" ");var r={name:t[0],width:t[1]};return i?o.isUndefined(e)?r:e(r):null},update:function(){a.now(function(e){if(e.name!==s){u.emit(e.name);u.emit("change",e);s=e.name}})}};e.onresize=o.debounce(a.update,100);t.addEventListener("DOMContentLoaded",function(){o.initializeUnison()});return{fetch:{all:a.all,now:a.now},on:u.on,off:u.off,emit:u.emit,util:{initializeUnison:o.initializeUnison,debounce:o.debounce,isObject:o.isObject}}})